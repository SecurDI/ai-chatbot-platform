# =============================================
# AI Chatbot Platform - Environment Variables
# =============================================
# Copy this file to .env.local and fill in your actual values
# NEVER commit .env.local to version control

# =============================================
# DATABASE CONFIGURATION (Vercel Postgres)
# =============================================
# Get these from: Vercel Dashboard → Storage → Postgres → .env.local tab
DATABASE_URL="postgres://username:password@host:5432/database"
POSTGRES_URL="postgres://username:password@host:5432/database"
POSTGRES_PRISMA_URL="postgres://username:password@host:5432/database?pgbouncer=true"
POSTGRES_URL_NON_POOLING="postgres://username:password@host:5432/database"

# =============================================
# CACHE & SESSION STORAGE (Vercel KV)
# =============================================
# Get these from: Vercel Dashboard → Storage → KV → .env.local tab
KV_REST_API_URL="https://your-kv-instance.upstash.io"
KV_REST_API_TOKEN="your-vercel-kv-token"
KV_REST_API_READ_ONLY_TOKEN="your-read-only-token"

# =============================================
# AUTHENTICATION (EntraID / Azure AD)
# =============================================
# Setup instructions:
# 1. Go to Azure Portal → Azure Active Directory → App Registrations
# 2. Create new app registration or use existing
# 3. Add redirect URI: https://yourdomain.com/api/auth/callback
# 4. Generate client secret in "Certificates & secrets"

AZURE_AD_CLIENT_ID="your-azure-app-client-id"
AZURE_AD_CLIENT_SECRET="your-azure-app-client-secret"
AZURE_AD_TENANT_ID="your-azure-tenant-id"

# EntraID OIDC endpoints (usually same for all Azure AD tenants)
AZURE_AD_AUTHORITY="https://login.microsoftonline.com/{tenant-id}"
AZURE_AD_ISSUER="https://login.microsoftonline.com/{tenant-id}/v2.0"

# =============================================
# NEXTAUTH CONFIGURATION
# =============================================
# NEXTAUTH_URL: Your application URL (production or local)
# Production example: https://your-app.vercel.app
# Local development: http://localhost:3000
NEXTAUTH_URL="http://localhost:3000"

# NEXTAUTH_SECRET: Generate with: openssl rand -base64 32
NEXTAUTH_SECRET="your-nextauth-secret-key-at-least-32-characters"

# =============================================
# SECURITY KEYS
# =============================================
# JWT_SECRET: Generate with: openssl rand -base64 32
JWT_SECRET="your-jwt-secret-key-for-token-signing"

# ENCRYPTION_KEY: Generate with: openssl rand -base64 32
# Used for encrypting sensitive data before storage
ENCRYPTION_KEY="your-encryption-key-at-least-32-characters"

# CSRF_SECRET: Generate with: openssl rand -base64 32
CSRF_SECRET="your-csrf-secret-key"

# =============================================
# SESSION CONFIGURATION
# =============================================
# Session timeout in seconds (8 hours = 28800 seconds)
SESSION_TIMEOUT="28800"

# Session refresh threshold (refresh when < 1 hour left = 3600 seconds)
SESSION_REFRESH_THRESHOLD="3600"

# =============================================
# RATE LIMITING CONFIGURATION
# =============================================
# Max requests per user per minute
RATE_LIMIT_PER_USER="60"

# Max requests per IP per minute (for unauthenticated endpoints)
RATE_LIMIT_PER_IP="30"

# =============================================
# NOTIFICATION SERVICES (Optional)
# =============================================
# Email notifications (SMTP)
SMTP_HOST="smtp.gmail.com"
SMTP_PORT="587"
SMTP_SECURE="false"
SMTP_USER="your-email@gmail.com"
SMTP_PASS="your-email-password-or-app-password"
SMTP_FROM="noreply@your-domain.com"

# Microsoft Teams Webhook (for approval notifications)
TEAMS_WEBHOOK_URL="https://your-org.webhook.office.com/webhookb2/..."

# =============================================
# APPLICATION CONFIGURATION
# =============================================
# Application name displayed in UI
APP_NAME="AI Chatbot Platform"

# Admin email for system notifications
ADMIN_EMAIL="admin@your-domain.com"

# Approval request expiration time (hours)
APPROVAL_EXPIRATION_HOURS="24"

# =============================================
# LOGGING & MONITORING
# =============================================
# Log level: debug, info, warn, error
LOG_LEVEL="info"

# Enable detailed error logging (set to "false" in production)
DEBUG_MODE="true"

# =============================================
# FUTURE INTEGRATIONS (Placeholder)
# =============================================
# Uncomment and configure when implementing AI features

# OpenAI API (for future AI integration)
# OPENAI_API_KEY="sk-..."
# OPENAI_MODEL="gpt-4"
# OPENAI_MAX_TOKENS="2000"

# Anthropic Claude API (alternative AI provider)
# ANTHROPIC_API_KEY="sk-ant-..."
# ANTHROPIC_MODEL="claude-3-opus-20240229"

# AWS Configuration (for future cloud management features)
# AWS_ACCESS_KEY_ID="your-aws-access-key"
# AWS_SECRET_ACCESS_KEY="your-aws-secret-key"
# AWS_REGION="us-east-1"
# AWS_SESSION_TOKEN="temporary-session-token" (if using temporary credentials)

# =============================================
# VERCEL DEPLOYMENT (Auto-populated by Vercel)
# =============================================
# These are automatically set by Vercel, do not manually configure
# VERCEL="1"
# VERCEL_ENV="production" or "preview" or "development"
# VERCEL_URL="your-deployment-url.vercel.app"
# VERCEL_GIT_COMMIT_SHA="git-commit-hash"

# =============================================
# DEVELOPMENT TOOLS
# =============================================
# Enable development features
NEXT_PUBLIC_DEV_MODE="true"

# Show detailed API error messages in client
NEXT_PUBLIC_SHOW_API_ERRORS="true"

# =============================================
# IMPORTANT SECURITY NOTES
# =============================================
# 1. NEVER commit .env.local to git (it's in .gitignore)
# 2. Use different secrets for development vs production
# 3. Rotate secrets regularly (every 90 days recommended)
# 4. Use Vercel environment variables UI for production secrets
# 5. Restrict Azure AD app permissions to minimum required
# 6. Enable MFA for Azure AD admin accounts
# 7. Use Azure Key Vault for production secrets (recommended)

# =============================================
# SETUP CHECKLIST
# =============================================
# [ ] Copy this file to .env.local
# [ ] Fill in all DATABASE_URL values from Vercel Postgres
# [ ] Fill in all KV values from Vercel KV
# [ ] Configure Azure AD app registration
# [ ] Generate all security keys (JWT_SECRET, ENCRYPTION_KEY, etc.)
# [ ] Configure SMTP for email notifications (if using)
# [ ] Update NEXTAUTH_URL to match your domain
# [ ] Test database connection: npm run db:test
# [ ] Test authentication flow: npm run dev
# [ ] Verify rate limiting is working
# [ ] Run migration: npm run db:migrate
